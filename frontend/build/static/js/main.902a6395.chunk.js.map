{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Login.js","images/UnionNeOK.svg","images/UnionOk.svg","components/InfoTooltip.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","exact","path","email","to","onClick","onSignOut","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","src","link","alt","name","onCardClick","type","onCardDelete","onCardLike","length","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","Footer","PopupWithForm","onOverlayClose","isOpen","title","onSubmit","children","onClose","ImagePopup","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","fetch","method","then","_getResponseData","data","body","JSON","stringify","id","authorization","localStorage","getItem","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","value","placeholder","required","minLength","maxLength","onChange","target","EditAvatarPopup","avatarRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","placeName","setPlaceName","placeLink","setPlaceLink","onAddCard","Login","password","info","setInfo","handleChange","onLogin","InfoTooltip","onResponse","statusSuccess","statusUnsuccess","regSuccess","regUnsaccess","onMessage","Register","onRegister","ProtectedRoute","Component","component","loggedIn","BASE_URL","getResponse","App","setCards","setCurrentUser","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isPopupImageOpen","setPopupImageOpen","isInfoTooltipOpen","setInfoTooltipOpen","setLoggedIn","setEmail","resSuccess","setResSuccess","message","setMessage","history","useHistory","handleLogin","closeAllPopups","handleOverlayClose","evt","currentTarget","token","getUserInfoMe","catch","err","console","log","getInitialCards","handleEscClose","key","document","addEventListener","removeEventListener","auth","push","tokenChek","Provider","removeItem","changeLikeCardStatus","newCard","state","c","delCard","filter","setItem","updateHeaders","changeUserInfo","editAvatar","postNewCard","onSign","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.902a6395.chunk.js","sourcesContent":["import React from 'react'\nimport { Route, Switch, Link } from 'react-router-dom'\n\nfunction Header(props) {\n    return (\n        <header className=\"header\">\n            <div className=\"header__wrapper\">\n            <div className=\"header__logo\"></div>\n            <Switch>\n                <Route exact path=\"/\">\n                    <div className=\"header__container\">\n                        <p className=\"header__email\">{props.email}</p>\n                        <Link to=\"signin\" className=\"header__link\" onClick={props.onSignOut}>Выйти</Link>\n                    </div>\n                </Route>\n\n                <Route path=\"/signin\">\n                    <Link to=\"signup\" className=\"header__link\">Зарегистрироваться</Link>\n                </Route>\n\n                <Route path=\"/signup\">\n                    <Link to=\"signin\" className=\"header__link\">Войти</Link>\n                </Route>\n            </Switch>\n            </div>\n        </header>    \n    )\n} \nexport default Header;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Card(props) {\n\n    const currentUser = React.useContext(CurrentUserContext)\n    const isOwn = props.card.owner === currentUser._id;\n    const cardDeleteButtonClassName = (`element__delete ${isOwn ? 'element__delete_visible' : 'element__delete_hidden'}`);\n    const isLiked = props.card.likes.some(i => i === currentUser._id);\n    const cardLikeButtonClassName = `element__image-like ${isLiked && 'element__image-like_active'}`;\n\n    function handleClick() {\n        props.onCardClick(props.card);\n    }\n\n    function handleLike() {\n        props.onCardLike(props.card);\n    }\n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card);\n    }\n    \n    return (\n        <div className=\"element\">\n            <img className=\"element__image\" src={props.card.link} alt={props.card.name} onClick={handleClick} />\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\n            <div className=\"element__item\">\n                <h2 className=\"element__title\">{props.card.name}</h2>\n                <div className=\"element__wrapper\">\n                    <button className={cardLikeButtonClassName} onClick={handleLike} type=\"button\"></button>\n                    <p className=\"element__image-like-number\">{props.card.likes.length}</p>\n                </div>\n            </div>\n        </div>   \n    )\n} \n\nexport default Card;","import React from 'react'\nimport Card from './Card'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Main(props) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n            <section className=\"profile\">\n                <div className=\"profile__items\">\n                    <div className=\"profile__wrapper\">\n                        <img className=\"profile__image\" src={currentUser.avatar} alt={currentUser.name} />\n                        <button className=\"profile__cursor\" onClick={props.onEditAvatar}></button>\n                    </div>\n                    <div className=\"profile__info\">\n                        <h1 className=\"profile__title\">{currentUser.name}</h1>\n                        <p className=\"profile__subtitle\">{currentUser.about}</p>\n                        <button className=\"profile__button-edit\" type=\"button\" onClick={props.onEditProfile}></button>\n                    </div>\n                </div>    \n                <button className=\"profile__button-add\" type=\"button\" onClick={props.onAddPlace}></button>\n            </section>\n\n            <section className=\"elements\">\n                    {props.cards.map(card => \n                    (\n                        <Card \n                        onCardClick={props.onCardClick}\n                        card={card}\n                        key={card._id}\n                        onCardLike={props.onCardLike}\n                        onCardDelete={props.onCardDelete}\n                        />\n                    )\n                    )}\n\n            </section>\n\n        </main>    \n\n    )\n} \nexport default Main;","import React from 'react'\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n        </footer>     \n    )\n} \nexport default Footer;","import React from 'react'\n\nfunction PopupWithForm(props) {\n    return (\n        <section onClick={props.onOverlayClose} className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`}>\n            <div className=\"popup__container\">\n                <h2 className={`popup__${props.title}`}>{props.title}</h2>\n                <form className=\"popup__form\" name={props.name} onSubmit={props.onSubmit}>\n                    {props.children}\n                    <button className=\"popup__save popup__button\">Сохранить</button>\n                    <button onClick={props.onClose} className={`popup__close popup__close_${props.name}`} type=\"button\"></button>\n                </form>\n            </div>\n\n        </section>\n    )\n} \nexport default PopupWithForm;","import React from 'react'\n\nfunction ImagePopup(props) {\n    return (\n        <section onClick={props.onOverlayClose} className={`popup popup_type_image ${props.isOpen && 'popup_opened'}`}>\n            <div className=\"popup__wrapper\">\n                    <button className=\"popup__close popup__close_image\" onClick={props.onClose} type=\"button\"></button>\n                    <img className=\"popup__image\" src={props.card.link}  alt={props.card.name}/>\n                    <h2 className=\"popup__subtitle\">{props.card.name}</h2>\n            </div>\n        </section>     \n    )\n} \nexport default ImagePopup;","class Api {\n    constructor(options) {\n        this._url = options.url;\n        this._headers = options.headers;\n    }\n\n    _getResponseData(res) {\n        if(!res.ok) {\n            return Promise.reject(`Ошибка:${res.status}`);\n        }\n            return res.json();  \n    }\n\n    getInitialCards() {\n        return fetch(`${this._url}/cards`, {\n            method:\"GET\",\n            headers: this._headers\n        })\n        .then(this._getResponseData)\n    }\n\n    postNewCard(data) {\n        return fetch(`${this._url}/cards`, {\n            method:'POST',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                link: data.link\n            })\n        })\n        .then(this._getResponseData)\n    }\n\n    getUserInfoMe() {\n        return fetch(`${this._url}/users/me`, {\n            headers: this._headers\n        })\n        .then(this._getResponseData)\n    }\n\n    changeUserInfo(data) {\n        return fetch(`${this._url}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body: JSON.stringify({\n                name: data.name,\n                about: data.about\n            })\n        })\n        .then(this._getResponseData)\n    }    \n\n    editAvatar(data) {\n        return fetch(`${this._url}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this._headers,\n            body:JSON.stringify({\n                avatar: data.link\n            })\n        })\n        .then(this._getResponseData)\n\n    }\n\n    changeLikeCardStatus(id, isLiked) {\n        if(isLiked)\n            {return fetch(`${this._url}/cards/${id}/likes`, {\n                method:'PUT',\n                headers: this._headers\n            })\n            .then(this._getResponseData)}\n        else {\n            return fetch(`${this._url}/cards/${id}/likes`, {\n                method: 'DELETE',\n                headers: this._headers\n            })\n            .then(this._getResponseData)\n        }    \n    }\n\n    delCard(id) {\n        return fetch(`${this._url}/cards/${id}`, {\n            method:'DELETE',\n            headers: this._headers\n        })\n        .then(this._getResponseData)\n\n    }\n\n    updateHeaders() {\n        this._headers = {\n          'Content-Type': 'application/json',\n          authorization: `Bearer ${localStorage.getItem('token')}`,\n        }\n      }\n}    \n\nconst api = new Api({\n    // url:\"http://localhost:3005\", \n    url:\"https://api.boronin.nomoredomains.icu\", \n    headers: {\n        \"Content-type\":'application/json',\n        authorization:`Bearer ${localStorage.getItem('token')}`\n    } \n}) \n\nexport default api;","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction EditProfilePopup(props) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n    const [name, setName] = React.useState(currentUser.name);\n    const [description, setDescription] = React.useState(currentUser.about);\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n      }, [currentUser]);\n\n    function handleChangeName(e) {\n        setName(e.target.value);\n    }\n\n    function handleChangeDescription(e) {\n        setDescription(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateUser({\n            name,\n            about: description,\n        });\n    }\n\n    return (\n        <PopupWithForm name=\"edit\" title=\"Редактировать профиль\" isOpen={props.isOpen} onOverlayClose={props.onOverlayClose} onClose={props.onClose} onSubmit={handleSubmit} children={(\n        <>\n            <input value={name || ''} type=\"text\" className=\"popup__input popup__input_type_name\" id=\"user-name\" name=\"name\" placeholder=\"Имя\" required minLength=\"2\" maxLength=\"40\" onChange={handleChangeName} />\n            <span id=\"user-name-error\" className=\"error\"></span>\n            <input value={description || ''} type=\"text\" className=\"popup__input popup__input_type_job\"  id=\"user-about\"     name=\"about\"  placeholder=\"Вид деятельности\" required minLength=\"2\" maxLength=\"200\" onChange={handleChangeDescription} />\n            <span id=\"about-error\" className=\"error\"></span>\n        </>\n        )}>\n        </PopupWithForm> \n    )\n} \nexport default EditProfilePopup;","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction EditAvatarPopup(props) {\n\n    const avatarRef = React.useRef()\n\n    React.useEffect(() => {\n        avatarRef.current.value=''\n    }, [props.isOpen])\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.onUpdateAvatar({\n          link: avatarRef.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm name=\"profile\" title=\"Обновить аватар\" isOpen={props.isOpen} onClose={props.onClose} onOverlayClose={props.onOverlayClose} onSubmit={handleSubmit} children={(\n        <>\n            <input className=\"popup__input popup__input_type_link\" type=\"url\" id=\"avatar-link\" placeholder=\"Ссылка на картинку\" name=\"link\" required ref={avatarRef} />\n            <span id=\"avatar-link-error\" className=\"error\"></span> \n        </>\n        )}>\n        </PopupWithForm> \n    )\n} \nexport default EditAvatarPopup;\n\n\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction AddPlacePopup(props) {\n\n    const [placeName, setPlaceName] = React.useState('')\n    const [placeLink, setPlaceLink] = React.useState('')\n\n    React.useEffect(() => {\n        setPlaceName('')\n        setPlaceLink('')\n    }, [props.isOpen])\n\n    function dischargeNameInput(e) {\n        setPlaceName(e.target.value)\n    }\n\n    function dischargeLinkInput(e) {\n        setPlaceLink(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        props.onAddCard({\n            name:placeName,\n            link:placeLink\n        })\n    }\n\n    return (\n        <PopupWithForm name=\"new-card\" title=\"Новое место\" isOpen={props.isOpen} onClose={props.onClose} onOverlayClose={props.onOverlayClose} onSubmit={handleSubmit} children={(\n        <>\n            <input value={placeName} onChange={dischargeNameInput} className=\"popup__input popup__input_type_title\" id=\"name-card\" placeholder=\"Название\" name=\"name\" minLength=\"2\" maxLength=\"30\" required />\n            <span id=\"name-card-error\" className=\"error\"></span>\n            <input value={placeLink} onChange={dischargeLinkInput} className=\"popup__input popup__input_type_link\" type=\"url\" id=\"link\" placeholder=\"Ссылка на картинку\" name=\"link\" required />\n            <span id=\"link-error\" className=\"error\"></span> \n        </>\n        )}>\n        </PopupWithForm> \n    )\n}\n\nexport default AddPlacePopup;","import React from 'react'\n\nfunction Login(props) {\n    const [info, setInfo] = React.useState({\n        password:'',\n        email:''\n    })\n\n    function handleChange(e) {\n        const {name, value} = e.target;\n        setInfo({\n            ...info,\n            [name]: value\n        });\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        const {password, email} = info;\n        if(!password || !email) {\n            return\n        }\n        props.onLogin(password, email)\n    }\n\n        return(\n          <div className=\"login\">\n            <p className=\"login__enter\">\n              Вход\n            </p>\n            <form onSubmit={handleSubmit} className=\"login__form\">\n                \n                <input \n                className=\"login__input login__input_type_username\" \n                placeholder=\"Email\" \n                required \n                id=\"email\" \n                name=\"email\" \n                type=\"text\" \n                value={info.email} \n                onChange={handleChange} />\n                \n                <input \n                className=\"login__input login__input_type_password\" \n                placeholder=\"Пароль\" \n                required \n                id=\"password\" \n                name=\"password\" \n                type=\"password\" \n                value={info.password} \n                onChange={handleChange} />\n                \n                <button type=\"submit\" className=\"login__link login__button\">Войти</button>  \n            </form>\n          </div>\n        )\n}\nexport default Login;","export default __webpack_public_path__ + \"static/media/UnionNeOK.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/UnionOk.df8eddf6.svg\";","import React from 'react'\nimport statusSuccess from '../images/UnionNeOK.svg';\nimport statusUnsuccess from '../images/UnionOk.svg'\nfunction InfoTooltip(props) {\n    return (\n        <section onClick={props.onOverlayClose} className={`popup ${props.isOpen && 'popup_opened'}`}>\n            <div className=\"popup__container-response\">\n                        <img className='popup__sign-image' src={`${props.onResponse ? statusSuccess : statusUnsuccess}`} alt={`${props.onResponse ? props.regSuccess : props.regUnsaccess}`} />\n                        <h2 className={`popup__title popup__title_type_response`}>{`${props.onResponse ? props.regSuccess : props.regUnsaccess}`}</h2>\n                        <p>{props.onMessage}</p>                 \n                <button onClick={props.onClose} className={`popup__close`} type=\"button\"></button>\n            </div>\n        </section>\n    )\n}\nexport default InfoTooltip;","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction Register(props) {\n\n    const [info, setInfo] = React.useState({\n        password:'',\n        email:'',\n    })\n\n    function handleChange(e) {\n        const {name, value} = e.target;\n        setInfo({\n            ...info,\n            [name]: value\n        });\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        const { password, email } = info;\n        props.onRegister(password, email);\n    }\n\n        return(\n          <div className=\"register\">\n            <p className=\"register__enter\">\n              Регистрация\n            </p>\n            <form onSubmit={handleSubmit} className=\"register__form\">\n                \n                <input \n                className=\"register__input register__input_type_username\" \n                placeholder=\"Email\" \n                required id=\"email\" \n                name=\"email\" \n                type=\"email\" \n                value={info.email || ''} \n                onChange={handleChange} />\n                \n                <input \n                className=\"register__input register__input_type_password\" \n                placeholder=\"Пароль\" \n                required id=\"password\" \n                name=\"password\" \n                type=\"password\" \n                value={info.password || ''} \n                onChange={handleChange} />\n                \n                <button type=\"submit\" className=\"register__link register__button\">Зарегистрироваться</button>  \n            </form>\n            <div className=\"register__signin\">\n                <p>Уже зарегистрированы?</p>\n                <Link to=\"signin\" className=\"register__login-link\">Войти</Link>\n            </div>\n          </div>\n        )\n    \n\n}\n\nexport default Register;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom'\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n    return ( \n        <Route>\n            {() => \n            props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\n            }\n        </Route>\n    )\n}\nexport default ProtectedRoute;","import api from '../utils/api';\n\n// export const BASE_URL = 'url:\"https://api.boronin.nomoredomains.icu\"'; \nexport const BASE_URL = \"https://api.boronin.nomoredomains.icu\"; \n// export const BASE_URL = 'http://localhost:3005'; \n\nconst getResponse = (res) => {\n    if(res.ok) {\n        return res.json();\n    }\n    return Promise.reject(res.status);\n}\n\nexport const register = (password, email) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({password, email})\n    })\n    .then(getResponse)\n}\n\nexport const authorize = (password, email) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\" \n        },\n        body: JSON.stringify({password, email})\n    })\n    .then(getResponse)\n    .then((res) => {\n        if(res.token) {\n            localStorage.setItem('token', res.token);\n            api.updateHeaders();\n            return res;\n        }\n    })\n}\n\nexport const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            authorization : `Bearer ${token}`\n        }\n    })\n    .then((res) => {\n        return res.json()\n    })\n}","import React from 'react'\nimport Header from './Header' \nimport Main from './Main'\nimport Footer from './Footer'\nimport PopupWithForm from './PopupWithForm'\nimport ImagePopup from './ImagePopup'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport api from '../utils/api'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom'\nimport Login from './Login'\nimport InfoTooltip from './InfoTooltip'\nimport Register from './Register'\nimport ProtectedRoute from './ProtectedRoute'\nimport * as auth from '../utils/auth'\n\nfunction App() {\n\n    const [cards, setCards] = React.useState([]) \n    const [currentUser, setCurrentUser] = React.useState({});\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false); \n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false); \n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false); \n    const [selectedCard, setSelectedCard] = React.useState({});\n    const [isPopupImageOpen, setPopupImageOpen] = React.useState(false);\n    const [isInfoTooltipOpen, setInfoTooltipOpen] = React.useState(false);\n    const [loggedIn, setLoggedIn] = React.useState(false);\n    const [email, setEmail] = React.useState('');\n    const [resSuccess, setResSuccess] = React.useState(false)\n    const [message, setMessage] = React.useState('');\n    const history = useHistory();\n\n    React.useEffect(() => {   \n        if(loggedIn) {\n            const token = localStorage.getItem('token');\n            api.getUserInfoMe(token)\n            .then((res) => {\n                if(res) {\n                    setCurrentUser(res);\n                }\n              \n            })\n            .catch((err) => console.log(err));\n            \n            api.getInitialCards(token)\n            .then((res) => {\n              setCards(res);\n            })\n            .catch((err) => console.log(err));\n            }\n        }, [loggedIn]);\n\n    function handleLogin() {\n        setLoggedIn(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleInfoTooltipClick() {\n        setInfoTooltipOpen(true);\n    }\n\n    function handleCardClick(card) {\n        setPopupImageOpen(true)\n        setSelectedCard(card)\n    }\n\n    function closeAllPopups() {\n        setIsEditAvatarPopupOpen(false);\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setPopupImageOpen(false)\n        setInfoTooltipOpen(false)\n    }\n\n    function handleOverlayClose(evt) {\n        if(evt.target === evt.currentTarget) {\n            closeAllPopups()\n        }\n    }\n\n    React.useEffect(() => {\n        function handleEscClose(evt) {\n            if(evt.key === 'Escape') {\n                closeAllPopups()\n                console.log('esc')\n            }\n        }\n        document.addEventListener('keydown', handleEscClose);\n        return () => {\n            document.removeEventListener('keydown', handleEscClose)\n        }\n    })\n    \n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i === currentUser._id);\n        api.changeLikeCardStatus(card._id, !isLiked)\n        .then((newCard) => {\n            setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n        })\n        .catch(err=>console.log(err));\n    }\n\n    function handleDeleteCard(card) {\n        api.delCard(card._id)\n        .then(() => {\n            setCards((state) => state.filter((c) => c._id !== card._id)\n        )})\n        .catch(err=>console.log(err))\n    }\n\n    function handleUpdateUser(data) {\n        api.changeUserInfo(data)\n        .then((data) => {\n            setCurrentUser(data)\n            closeAllPopups()\n        })\n        .catch(err=>console.log(err))\n    }\n\n    function handleUpdateAvatar(data) {\n        api.editAvatar(data)\n        .then((data) => {\n            setCurrentUser(data)\n            closeAllPopups()\n        }) \n        .catch(err=>console.log(err))\n    }\n\n    function handleAddPlaceSubmit(data) {\n        api.postNewCard(data)\n        .then((data) => {\n            setCards([data, ...cards])\n            closeAllPopups()\n        })\n        .catch(err=>console.log(err))\n    }\n\n    function signOut() {\n        localStorage.removeItem('token');\n        history.push('/signin');\n        setLoggedIn(false);\n    }\n\n    function handleRegisterSubmit(password, email) {\n        auth.register(password, email)\n        .then((res) => {\n            if(res) {\n                history.push('/signin')\n                setInfoTooltipOpen(true)\n                setResSuccess(true)\n                setMessage('');\n            } \n        })\n        .catch((err) => {\n            setInfoTooltipOpen(true)\n            setResSuccess(false)\n            if(err === 400) {\n            setMessage('Неправильно заполнено одно из полей')\n            } \n        }) \n    }\n\n    function handleLoginSubmit(password, email) {\n        return auth.authorize(password, email)\n\n        .then((data) => {\n            if(data.token) {\n                handleLogin(); \n                history.push('/');  \n            }\n        })\n        .catch((err) => {\n            if(err === 400) {\n                console.log('Не хватает одного из полей')\n            } \n            if(err === 401) {\n                console.log('Пользователь с таким email не найден')\n            }    \n        })\n    }\n\n    React.useEffect(() => {\n        function tokenChek() {\n            const token = localStorage.getItem(\"token\");\n            if(token) {\n                auth.getContent(token)\n                .then((res) => {\n                    if(res) {  \n                        setEmail(res.email);\n                        handleLogin();\n                        history.push('/');  \n                    }\n                })\n                .catch((err) => {\n                    if(err === 401) {\n                        console.log('Токен не передан или неверный формат')\n                    }\n                    if(err === 401) {\n                        console.log('*Переданный некорректный токен')\n                    }\n                })\n            }\n    } tokenChek();\n    }, [loggedIn, history])\n    return (\n    <>\n        <div className=\"page\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header email={email} onSignOut={signOut} />  \n                    <Switch>\n                        <ProtectedRoute \n                            exact path=\"/\"\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            cards={cards}\n                            onCardLike={handleCardLike}\n                            onCardDelete={handleDeleteCard}\n                            loggedIn={loggedIn}\n                            component={Main}\n                        /> \n\n                        <Route path=\"/signup\">\n                            <Register onRegister={handleRegisterSubmit} />\n                        </Route>\n                        <Route path=\"/signin\">\n                            <Login onLogin={handleLoginSubmit} />\n                        </Route>\n                        <Route>\n                            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n                        </Route>\n                        \n                    </Switch>\n                \n                <Footer />\n\n                <EditProfilePopup \n                isOpen={isEditProfilePopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onUpdateUser={handleUpdateUser}>\n                </EditProfilePopup>\n\n                <EditAvatarPopup \n                isOpen={isEditAvatarPopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onUpdateAvatar={handleUpdateAvatar}>\n                </EditAvatarPopup>\n\n                <AddPlacePopup \n                isOpen={isAddPlacePopupOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onAddCard={handleAddPlaceSubmit}>\n                </AddPlacePopup>\n                    \n                <ImagePopup \n                card={selectedCard} \n                isOpen={isPopupImageOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose}\n                /> \n\n                <InfoTooltip \n                isOpen={isInfoTooltipOpen} \n                onClose={closeAllPopups} \n                onOverlayClose={handleOverlayClose} \n                onSign={handleInfoTooltipClick} \n                onResponse={resSuccess}\n                regSuccess='Вы успешно зарегистрированы!'\n                regUnsaccess='Что-то пошло не так...'\n                onMessage={message}\n                /> \n\n                <PopupWithForm name=\"delete\" title=\"Вы уверены?\"/>\n            </CurrentUserContext.Provider>\n        </div>\n    </>  \n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}